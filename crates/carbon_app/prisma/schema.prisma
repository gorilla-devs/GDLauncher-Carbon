datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "cargo prisma"
  output   = "../src/db.rs"
}

model AppConfiguration {
  id                  Int     @id @unique @default(0)
  theme               String  @default("main")
  reducedMotion       Boolean @default(false)
  language            String  @default("en")
  discordIntegration  Boolean @default(true)
  releaseChannel      String  @default("stable")
  activeAccountUuid   String?
  concurrentDownloads Int     @default(8)
  showNews            Boolean @default(true)
  startupResolution   String  @default("854x480")
  javaCustomArgs      String  @default("")
  xmx                 Int     @default(1024)
  xms                 Int     @default(1024)
}

model Java {
  path        String       @id @unique
  major       Int
  fullVersion String
  type        String
  arch        String
  defaultJava DefaultJava?
}

model DefaultJava {
  path     String @id
  major    Int    @unique
  javaPath Java   @relation(fields: [path], references: [path])
}

model Account {
  uuid           String    @id
  username       String
  // presence signifies a microsoft account
  accessToken    String?
  tokenExpires   DateTime?
  msRefreshToken String?
  lastUsed       DateTime
  skinId         String?
}

model Skin {
  id   String @id
  skin Bytes
}

model HTTPCache {
  id        String   @id
  url       String
  data      Bytes
  createdAt DateTime @default(now())
}

model ActiveDownloads {
  url     String @id
  file_id String @unique
}
